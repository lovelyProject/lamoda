import{P as y,C as M}from"./CommonCard-77f8b1d9.js";import{_ as m,o as a,c as d,p as T,f as $,a as e,r as c,t as _,e as h,w as C,g as b,h as x,d as u,F as B,b as L,i as O,m as S}from"./index-421b149f.js";const k={},p=t=>(T("data-v-af059208"),t=t(),$(),t),P={class:"lds-ripple"},A=p(()=>e("div",null,null,-1)),D=p(()=>e("div",null,null,-1)),E=[A,D];function I(t,o){return a(),d("div",P,E)}const w=m(k,[["render",I],["__scopeId","data-v-af059208"]]),N={class:"modal__container"},V={class:"modal__img-container"},G=["src"],R={class:"modal__details"},q={class:"modal__text m-description"},F={class:"modal__text m-rate"},U={class:"modal__text m-price"},j={class:"modal__btn"};function H(t,o,n,f,g,s){const l=c("primary-button");return a(),d("div",{class:"modal",onClick:o[0]||(o[0]=b((...r)=>s.hideModal&&s.hideModal(...r),["self"]))},[e("div",N,[e("div",V,[e("img",{class:"modal__img",src:n.state.image},null,8,G)]),e("div",R,[e("h2",null,_(n.state.title),1),e("p",q,_(n.state.description),1),e("span",F,"Рейтинг: "+_(n.state.rating.rate),1),e("span",U,"Цена: "+_(n.state.price)+"$",1),e("div",j,[h(l,{onOnButton:s.onButton},{default:C(()=>[x("Добавить в корзину")]),_:1},8,["onOnButton"])])])])])}const z={props:{state:{type:Object,required:!0}},components:{PrimaryButton:y},methods:{hideModal(){this.$emit("hideModal")},onButton(){this.$emit("onButton",this.state)}}},J=m(z,[["render",H],["__scopeId","data-v-b6ec3d31"]]),K={class:"main"},Q={key:1,class:"main__list"};function W(t,o,n,f,g,s){const l=c("the-loader"),r=c("common-card"),v=c("the-modal");return a(),d("div",K,[t.isLoading?(a(),u(l,{key:0})):(a(),d("ul",Q,[(a(!0),d(B,null,L(s.filterProducts,i=>(a(),d("li",{class:"main__list-item",key:i.id},[h(r,{state:i,"is-btn-active":!1,onClick:Y=>s.toggleModal(i)},null,8,["state","onClick"])]))),128))])),t.isModal?(a(),u(v,{key:2,state:t.modalState,onOnButton:s.addToCart,onHideModal:o[0]||(o[0]=i=>s.toggleModal(null))},null,8,["state","onOnButton"])):O("",!0)])}const X={computed:{filterParam(){return this.$route.query.filter},...S({products:t=>t.product.products,isLoading:t=>t.product.isLoading,isModal:t=>t.product.isModal,modalState:t=>t.product.modalState}),filterProducts(){const t=this;return this.products.filter(o=>t.filterParam?o.category===t.filterParam:!0)}},methods:{addToCart(t){this.$store.commit("ADD_TO_CART",t),this.$store.dispatch("UPDATE_LOCAL_CART"),this.toggleModal(null)},toggleModal(t){this.$store.commit("SET_MODAL_STATE",t),this.$store.commit("TOGGLE_MODAL")}},components:{CommonCard:M,TheLoader:w,TheModal:J},mounted(){this.products&&this.$store.dispatch("GET_PRODUCTS")}},et=m(X,[["render",W],["__scopeId","data-v-3d0ebb8b"]]);export{et as default};
